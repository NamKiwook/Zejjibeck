extends layout

block content
  h1 title
  p Welcome to #{title}
  form#ajaxForm(enctype='multipart/form-data')
    input#ajaxFile(type='file', multiple="multiple")
    input(type='button' onclick="upload();", value="업로드")
  div#status No uploads
  script.

      function upload() {


            var files = document.getElementById('ajaxFile').files;
              for (var i = 0; i < files.length; i++) {
                  var filename = files[i].name;
                  var file = files[i];
                  console.log(filename);
                  $.ajax({//signed된 url요청
                      type: 'post',
                      url: '/s3/putPresignedUrl',
                      data: {filename: filename},
                      success: function (url) {
                          console.log(url);

                          $.ajax({  //읽기 또는 쓰기 요청
                              type: 'put',  //쓸때는 put 읽을 때는 get
                              url: url,
                              contentType: false,
                              processData: false,
                              data: file,    // 이거는 put할때 넣는 데이터 get일때는 쓸모없음
                              success: function () {      // 만약에 get했을때 데이터 보고싶으면 function(data){console.log(data);}하면됨
                                  console.log('ok');
                              },
                              error: function (err) {
                                  console.log(err);
                              }

                          });

                      }
                  });
              }

      }

